<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=750, initial-scale=1.0,maximum-scale=1.0,user-scalable=0">


  <title>Bottom Navigation</title>
<!--   <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/matericious@0.9.0/dist/css/matericious.min.css'>
 --><link rel="stylesheet" href="./style.css">



</head>
<body ontouchstart>

<div class="layer2">
  <div class="list">
    <input id="input1" class="inputUI" name="quantity" type="number" value="100">
    <div id="add1" class="addbt">+</div>
    <div id="reduce1" class="reducebt">-</div>
  </div>
  <div class="list1">
    <input id="input2" class="inputUI" name="quantity" type="number" value="100">
    <div id="add2" class="addbt">+</div>
    <div id="reduce2" class="reducebt">-</div>    
  </div>
</div>
<div class="bottom"></div>

<script src="./jquery-3.3.1.min.js"></script>

<!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js"></script>
 -->  
 <script src='./matericious.min.js'></script>
<script  src="./script.js"></script>

    <script>


window.onload = function() {
    // 阻止双击放大
    var lastTouchEnd = 0;
    document.addEventListener('touchstart', function(event) {
        if (event.touches.length > 1) {
            event.preventDefault();
        }
    });
    document.addEventListener('touchend', function(event) {
        var now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
            event.preventDefault();
        }
        lastTouchEnd = now;
    }, false);

    // 阻止双指放大
    document.addEventListener('gesturestart', function(event) {
        event.preventDefault();
    });
}



      var input1Val = 100;
      var input2Val = 100;

      $('#add1').on("touchend",function(){
        input1Val = input1Val + 1;
        $('#input1').val(input1Val);
      })

      $('#reduce1').on("touchend",function(){
        input1Val = input1Val - 1;
        $('#input1').val(input1Val);
      })   

      $('#add2').on("touchend",function(){
        input2Val = input2Val + 1;
        $('#input2').val(input2Val);
      })

      $('#reduce2').on("touchend",function(){
        input2Val = input2Val - 1;
        $('#input2').val(input2Val);
      })         

   $(function(){

    userDevice.zoomResize = false; // 設定用戶是否可以 zoom resize

    });


var userDevice = {
  zoomResize: false,

  getDeviceInfo: function(){
    let userAgent = navigator.userAgent;
    let appVersion = navigator.appVersion;
    
    let browserName = navigator.appName;
    let browserFullVersion = ''+parseFloat(appVersion); 
    let browserMajorVersion = parseInt(''+browserFullVersion,10);
    let operatingSystem = null;
    let deivec = null;
    let verOffset,ix,nameOffset;

    function _getBrowserName(){
      console.log('_getBrowserName start')
          if(verOffset = userAgent.indexOf("Chrome")!=-1){
            browserName = 'Chrome';
            browserFullVersion =  userAgent.substring(verOffset+7);
          }else if(userAgent.indexOf('MicroMessenger') > -1){
            browserName = 'Wechat';         
        browserFullVersion = userAgent.match(/MicroMessenger\/([\d\.]+)/i)[1] // 获取微信版本号              
          }else if(userAgent.indexOf('Trident') > -1){
            browserName = 'IE';
          }else if(userAgent.indexOf('Presto') > -1){
            browserName = 'Opera';
          }else if(userAgent.indexOf('AppleWebKit') > -1){
            browserName = 'AppleWebKit';      
          };
    };

    function _getOperatingSystem(){
          if(!!userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)){ //ios终端
            operatingSystem = 'iOS';
          }else if(userAgent.indexOf('Android') > -1 || userAgent.indexOf('Linux') > -1){ //android终端或者uc浏览器
            operatingSystem = 'Android';            
          };
    };

    //browserName = this._getBrowserName;
     _getBrowserName();
    _getOperatingSystem();  

    if(!!userAgent.match(/AppleWebKit.*Mobile.*/)){
      deivec = 'Mobile';
    };

    // trim the browserFullVersion string at semicolon/space if present
    if ((ix = browserFullVersion.indexOf(";"))!=-1)
      browserFullVersion = browserFullVersion.substring(0,ix);
    if ((ix = browserFullVersion.indexOf(" "))!=-1)
      browserFullVersion = browserFullVersion.substring(0,ix);

    if (isNaN(browserMajorVersion)) {
      browserFullVersion  = ''+parseFloat(navigator.appVersion); 
      browserMajorVersion = parseInt(navigator.appVersion,10);
    };

    return {
      browserName,
      browserFullVersion,
      browserMajorVersion,
      operatingSystem,
      deivec
    };

       // return {//移动终端浏览器版本信息 
       //      trident: u.indexOf('Trident') > -1, //IE内核
       //      presto: u.indexOf('Presto') > -1, //opera内核
       //      webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
       //      gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
       //      mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
       //      ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
       //      android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
       //      iPhone: u.indexOf('iPhone') > -1 , //是否为iPhone或者QQHD浏览器
       //      iPad: u.indexOf('iPad') > -1, //是否iPad  
       //      webApp: u.indexOf('Safari') == -1, //是否web应该程序，没有头部与底部
       //      weixin: u.indexOf('MicroMessenger') > -1, //是否微信 
       //      chrome: u.indexOf("Chrome")!=-1, //是否是chrome
       //      firefox: u.indexOf("Firefox")!=-1, //是否是firefox
       //      qq: u.match(/\sQQ/i) == "qq", //是否QQ
       //      pc:!this.mobile && !this.android && !this.ios, //是否是pc
       //  };

  }(),

  addSet: function(){
    this._zoomResize(this.zoomResize);
  },

  _zoomResize: function(zoomResize){
    // 作者：互联网学徒
    // 禁止用戶縮放螢幕
    // 链接：https://juejin.im/post/5b46ec375188251ac9767094
    // 来源：掘金
    // 在iOS 10以前，iOS和Android都可以通过一行meta标签来禁止页面缩放
    // <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
    // 但iOS 10开始，meta设置在Safari内无效了。
    // 呼叫方式：
    // userDevice.zoomResize = true;
    // userDevice.addSet();

    // 以CSS touch-action: manipulation禁止double-tap手勢
    // html, body {
    //   touch-action: manipulation;
    // }
    // CodePen Embed - gzNXBp

    // Edit description
    // codepen.io 
    // 實際測試結果：只可handle Double-tap手勢觸發的zoom-in/zoom-out
    // 換言之，pinch手勢不會被禁止，但是double-tap手勢會被禁止，測試結果也是只有double-tap的手勢觸發的zoom-in/zoom-out被handle了。



    if(zoomResize){
      console.log('禁止用戶縮放螢幕')
      document.addEventListener('touchstart',function (event) {
        if(event.touches.length>1){
          event.preventDefault();
        }
      },{ passive: false });

      var lastTouchEnd=0;
      document.addEventListener('touchend',function (event) {
        var now=(new Date()).getTime();
        if(now-lastTouchEnd<=300){
          event.preventDefault();
        }
        lastTouchEnd=now;
      },{ passive: false });

      document.addEventListener('gesturestart', function (event) {
        event.preventDefault();
      });
    };
  },
};   
// window.onpageshow=function(e){
//   console.log('onpageshow',e)
//   if(e.persisted) {
//   window.location.reload() 
//   }
// };


      window.onload=function () {
        document.addEventListener('touchstart',function (event) {
          if(event.touches.length>1){
            event.preventDefault();
          }
        });
        var lastTouchEnd=0;
        document.addEventListener('touchend',function (event) {
          var now=(new Date()).getTime();
          if(now-lastTouchEnd<=300){
            event.preventDefault();
          }
          lastTouchEnd=now;
        },false);
        document.addEventListener('gesturestart', function (event) {
          event.preventDefault();
        });
      }
    </script>
</body>
</html>